/* ========= Downhole (overrides on top of base.css) ========= */

/* Tokens */
.dh-page{
  --dh-radius:12px;
  --dh-border:#e5e7eb;
  --dh-bg:#fff;
  --dh-bg-soft:#fafafa;
  --dh-text-muted:#6b7280;
  --dh-accent:#3b82f6;
  --dh-success:#10b981;
  --dh-danger:#ef4444;
  --dh-warn:#f59e0b;
  --dh-shadow:0 20px 35px rgba(0,0,0,.15);
  --dh-input-h:38px;
  --dh-input-pad-x:10px;
  --dh-gap:8px;
}

/* صفحه و کارت */
.dh-page{ padding:16px; }
.dh-card{
  background:var(--dh-bg);
  border:1px solid var(--dh-border);
  border-radius:var(--dh-radius);
  padding:12px;
}

/* دکمه‌ها */
.btn{
  border:1px solid var(--dh-border);
  background:#fff;
  border-radius:10px;
  padding:8px 12px;
  cursor:pointer;
  transition:filter .15s, background .15s, transform .05s;
  white-space:nowrap; max-width:100%;
}
.btn:hover{ background:#f9fafb; }
.btn:active{ transform:scale(.99); }
.btn.small{ padding:4px 8px; font-size:13px; }
.btn.primary{ background:var(--dh-accent); border-color:var(--dh-accent); color:#fff; }
.btn.success{ background:var(--dh-success); border-color:var(--dh-success); color:#fff; }
.btn.danger{ background:var(--dh-danger); border-color:var(--dh-danger); color:#fff; }
.btn.warn{ background:var(--dh-warn); border-color:var(--dh-warn); color:#111827; }
.btn.primary:hover,.btn.success:hover,.btn.danger:hover,.btn.warn:hover{ filter:brightness(.97); }
.btn.solid{ background:var(--dh-accent); color:#fff; border-color:var(--dh-accent); }

/* ===== Tabs Header (وسط‌چین و شبیه تیتر) ===== */
.tabs-titlebar{
  display:flex; justify-content:center; align-items:center;
  gap:12px;
  padding:10px 0 12px;
  margin-bottom:8px;
  background:transparent; border:0;
}

/* تیتر تب‌ها: سفید + بوردر خاکستری، فونت درشت */
.tabbtn{
  appearance:none;
  background:#fff;
  border:1px solid #e5e7eb;  border-radius:12px;
  padding:8px 16px;
  font-weight:800;
  font-size:20px;
  line-height:1.35;
  color:#111827;
  cursor:pointer;
  transition:
    background-color .34s ease,
    color .34s ease,
    border-color .34s ease,
    box-shadow .34s ease,
    transform .18s ease;
}
.tabbtn:hover{ background:#f8fafc; }
.tabbtn:active{ transform:translateY(1px); }

/* فعال + فوکوس: داخل آبی خیلی ملایم، بوردر مشکی، هاله لطیف */
.tabbtn.is-on,
.tabbtn[aria-selected="true"]{
  background:#eef2ff;

  color:#111827;
}
.tabbtn:focus,
.tabbtn:focus-visible{
  outline:none;
  background:#eef2ff;
  border-color:#000;
  box-shadow:0 0 0 2px rgba(59,130,246,.18);
}

/* جداکننده بین تب‌ها */
.tabs-titlebar .divider{
  width:1px; height:26px; background:#e5e7eb; display:inline-block; margin:0 10px;
}
@media (max-width:520px){
  .tabbtn{ font-size:16px; padding:6px 12px; }
  .tabs-titlebar .divider{ height:24px; }
}

/* سکشن‌ها */
.dh-section{ margin-top:12px; }
.dh-sec-hdr{
  display:flex; align-items:center; gap:var(--dh-gap);
  padding:8px 10px; border:1px dashed var(--dh-border);
  border-radius:10px; background:var(--dh-bg-soft); cursor:pointer;
}
.dh-sec-hdr .muted{ margin-inline-start:4px; color:var(--dh-text-muted); font-size:13px; }
.chev{ margin-inline-start:auto; color:var(--dh-text-muted); }

/* جدول‌ها */
.table-wrap{ margin-top:8px; overflow:auto; }
table{ width:100%; border-collapse:collapse; }
thead th{ background:#f3f4f6; }
th,td{ border:1px solid var(--dh-border); padding:8px 10px; text-align:right; }
td.ops{ display:flex; gap:6px; align-items:center; }
tbody tr.is-selected td{ box-shadow: inset 0 0 0 2px rgba(37,99,235,.18); }
tbody tr.need-fix td{ background:#fff7ed; }
.empty{ text-align:center; color:var(--dh-text-muted); }

/* صفحه‌بندی */
.pagination{
  display:flex; gap:10px; align-items:center; justify-content:center;
  padding:8px 0 2px;
}
.pg-btn{ border:1px solid var(--dh-border); background:#fff; border-radius:8px; padding:6px 10px; }
.pg-btn[disabled]{ opacity:.5; cursor:not-allowed; }

/* مودال‌ها */
.dh-backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.25); display:flex; align-items:center; justify-content:center; z-index:1200; }
.dh-modal{
  width:min(960px,96vw); max-height:90vh; overflow:auto;
  background:#fff; border:1px solid var(--dh-border); border-radius:var(--dh-radius); padding:10px;
  box-shadow: var(--dh-shadow);
}
.dh-modal--wide{ max-width:980px; }
.dh-modal--small{ width:min(520px,92vw); }
.dh-modal__hdr{ display:flex; align-items:center; justify-content:space-between; padding:6px 4px 10px; font-weight:700; }
.dh-modal__ftr{ display:flex; justify-content:flex-end; gap:var(--dh-gap); margin-top:10px; }
.dh-close{ border:0; background:#fff; font-size:18px; cursor:pointer; border-radius:8px; padding:4px 8px; }
.dh-close:hover{ background:#f3f4f6; }

/* فرم‌ها */
.form{ display:flex; flex-direction:column; gap:var(--dh-gap); margin-top:8px; }
.form--tight .row{ gap:12px; }
.row{ display:grid; grid-template-columns:repeat(3, minmax(0,1fr)); gap:var(--dh-gap); }
.col{ display:flex; flex-direction:column; gap:4px; }
.label{ font-size:13px; color:#374151; margin-bottom:4px; }

/* فیلدها */
.input{
  border:1px solid var(--dh-border);
  background:#fff; border-radius:10px;
  height:var(--dh-input-h);
  padding:0 var(--dh-input-pad-x);
  width:100%;
  line-height:calc(var(--dh-input-h) - 2px);
}
.input.err{ border-color:var(--dh-danger); box-shadow:0 0 0 2px rgba(239,68,68,.12); }
.input--sm{ --dh-input-h:34px; }
.unit-wide{ width:100%; }

/* زیرنویس «الزامی» */
.req-hint{ display:block; margin-top:4px; font-size:12px; color:var(--dh-danger); }

/* input + انتخاب/آیکن */
.with-pick{ display:flex; align-items:center; gap:8px; }
.pick-btn{
  border:1px solid var(--dh-border); background:#fff; border-radius:10px;
  padding:6px 10px; cursor:pointer; line-height:1; transition:transform .05s, background .15s;
}
.pick-btn:hover{ background:#f9fafb; }
.pick-btn:active{ transform:scale(.97); }

/* سایز + آیکن */
.size-with-icon{ display:inline-flex; align-items:center; gap:6px; }
.size-with-icon .input{ padding-inline-end: var(--dh-input-pad-x); }
.finger-ico{ width:18px; height:18px; color:#64748b; opacity:.9; flex:0 0 auto; translate:0 1px; }

/* انتخاب‌های چندگانه */
.chips{ display:flex; flex-wrap:wrap; gap:8px; }
.chip{
  display:inline-flex; align-items:center; gap:6px;
  border:1px solid var(--dh-border); border-radius:999px; padding:4px 10px;
  background:#fff; cursor:pointer; user-select:none; font-size:13px;
}
.chip.on{ background:#eef2ff; border-color:#c7d2fe; }
.chip input{ display:none; }

/* DatePicker */
.rmdp-rtl .rmdp-input{
  width:100%; border:1px solid var(--dh-border); background:#fff; border-radius:10px;
  height:var(--dh-input-h);
  line-height:calc(var(--dh-input-h) - 2px);
  padding:0 var(--dh-input-pad-x);
}
.rmdp-rtl .rmdp-input:focus{ outline:none; border-color:#c7d2fe; box-shadow:0 0 0 3px rgba(37,99,235,.15); }

/* آرشیو */
.arch-filter{
  border:1px solid var(--dh-border); border-radius:var(--dh-radius);
  padding:8px 12px; background:var(--dh-bg-soft); margin-bottom:8px;
}
.arch-filter > summary{ cursor:pointer; font-weight:600; margin:4px 0 8px; }

/* اطلاعات ردیف آرشیو */
.arch-info{
  display:grid; grid-template-columns:repeat(4,1fr); gap:8px 14px;
  background:#f8fafc; border:1px solid var(--dh-border); border-radius:var(--dh-radius);
  padding:10px 12px; margin-bottom:12px; font-size:13px;
}

/* ابزارهای جداول */
.table-toolbar{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }

/* خروجی‌ها زیر دکمه‌های فیلتر */
.btnrow,.io-actions{ display:flex; gap:8px; flex-wrap:wrap; }
.btnrow > :nth-child(n+3), .io-actions > :nth-child(n+3){ flex-basis:100%; display:flex; gap:8px; }
.btnrow > :nth-child(n+3) > *, .io-actions > :nth-child(n+3) > *{ flex:0 1 auto; max-width:100%; }

/* ریسپانسیو */
@media (max-width:900px){
  .row{ grid-template-columns:1fr; }
  .dh-modal{ width:min(96vw,960px); }
  .arch-info{ grid-template-columns:repeat(2,1fr); }
}

/* ===== انیمیشن نرم هنگام سوییچ تب‌ها ===== */
.dh-card .dh-toolbar,
.dh-card .dh-section,
.dh-card .io-filter,
.dh-card .table-wrap,
.dh-card .pagination,
.dh-card .muted{
  animation: dhFadeSlide .34s ease both;
}
@keyframes dhFadeSlide{
  from{ opacity:0; transform:translateY(6px); }
  to  { opacity:1; transform:translateY(0); }
}
@media (prefers-reduced-motion: reduce){
  .dh-card .dh-toolbar,
  .dh-card .dh-section,
  .dh-card .io-filter,
  .dh-card .table-wrap,
  .dh-card .pagination,
  .dh-card .muted{
    animation:none;
  }
}
